(()=>{"use strict";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function o(t){return new Promise(e=>{setTimeout(e,t)})}t.r(e),t.d(e,{startGame_Click:()=>H,touchBottom_click:()=>U,touchLeft_click:()=>N,touchRight_click:()=>q,touchTop_click:()=>I});var n=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function f(t){try{c(n.next(t))}catch(t){r(t)}}function s(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(f,s)}c((n=n.apply(t,e||[])).next())})};function i(t){switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":t.preventDefault(),w(t.key)}}window.onload=function(){document.getElementById("gameLoading").style.display="none",r=!0};let r=!1,f=!1,s=!1;function c(){!f&&r&&(f=!0,document.getElementById("gameStart").style.display="none",window.addEventListener("keydown",i),function(){n(this,void 0,void 0,function*(){for(;!d;)yield o(100);for(;!s;){switch(Math.floor(4*Math.random())){case 0:O(-24,d.offsetLeft-d.offsetWidth+24,L,0,1,0,++h[1][0],[1,0]);break;case 1:O(window.innerHeight,d.offsetLeft+24-12,-L,0,2,0,++h[1][1],[1,1]);break;case 2:O(d.offsetTop+24-12,-24,0,L,0,1,++h[1][2],[1,2]);break;case 3:O(d.offsetTop-d.offsetHeight+24,window.innerWidth,0,-L,0,2,++h[1][3],[1,3])}yield o(A)}})}())}function l(t,e){return!(t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function a(t){const e=g[0][t[1]],o=g[1][t[1]];return null==e||null==o||(!l(e,o)||(g[0][t[1]]=null,g[1][t[1]]=null,!1))}const u=2,d=document.getElementById("player"),y=document.querySelector("#player .red");let p="null";function w(t){if(d&&D){switch(t){case"ArrowUp":{function e(){return n(this,arguments,void 0,function*(t=0){t>0&&(yield o(t)),d&&(yield b(d.offsetTop-d.offsetHeight+24+12,d.offsetLeft-d.offsetWidth+24,-u,0,++h[0][0],[0,0]))})}"ArrowUp"==p?(M("player-top-shoot .25s forwards"),e()):(M("player-top .5s forwards"),p="ArrowUp",e(250))}break;case"ArrowDown":{function i(){return n(this,arguments,void 0,function*(t=0){t>0&&(yield o(t)),d&&b(d.offsetTop+24-12,d.offsetLeft+24-12,u,0,++h[0][1],[0,1])})}"ArrowDown"==p?(M("player-bottom-shoot .25s forwards"),i()):(M("player-bottom .5s forwards"),p="ArrowDown",i(250))}break;case"ArrowLeft":{function r(){return n(this,arguments,void 0,function*(t=0){t>0&&(yield o(t)),d&&b(d.offsetTop+24-12,d.offsetLeft-d.offsetWidth+24,0,-u,++h[0][2],[0,2])})}"ArrowLeft"==p?(M("player-left-shoot .25s forwards"),r()):(M("player-left .5s forwards"),p="ArrowLeft",r(250))}break;case"ArrowRight":{function f(){return n(this,arguments,void 0,function*(t=0){t>0&&(yield o(t)),d&&b(d.offsetTop-d.offsetHeight+24,d.offsetLeft+24-12,0,u,++h[0][3],[0,3])})}"ArrowRight"==p?(M("player-right-shoot .25s forwards"),f()):(M("player-right .5s forwards"),p="ArrowRight",f(250))}break;default:return}!function(){S++<=0&&function(){n(this,void 0,void 0,function*(){let t=S,e=0;for(;S>0;){if(S>=C&&D&&(D=!1),e>=P||!D){const n=10;let i=0,r=0;do{D||r>=P?D?(T(-E),y.offsetWidth):(T(-E,!1),i==Math.round(n/3)&&(x(),y.offsetWidth)):(r+=B,i==Math.round(n/3)&&y&&(y.style.opacity="1",y.offsetWidth)),t=S,D||i++>=n&&(y&&(y.style.opacity=(Number(y.style.opacity)/2).toString(),y.offsetWidth),i=0),yield o(B)}while(t==S&&!(S<=0));e=0}t==S?e+=W:(e=0,t=S),yield o(W)}D||(D=!0)})}();x()}()}}let m=function(t){let e=t.map(t=>t.slice()),o=new Array(2).fill(0).map(()=>new Array(4).fill(0));function n(){for(let t=0;t<e[1].length;t++)e[1][t]!=o[1][t]&&(j.value+=e[1][t]-o[1][t]);o=e.map(t=>t.slice())}return{get value(){return{value:e.map(t=>t.slice()),setCell:(t,o,i)=>{e[t][o]=i,n()}}},set value(t){e=t.map(t=>t.slice()),n()},get lastValue(){return o}}}([[0,0,0,0],[0,0,0,0]]),h=[[-1,-1,-1,-1],[-1,-1,-1,-1]];const g=[[new DOMRect,new DOMRect,new DOMRect,new DOMRect],[new DOMRect,new DOMRect,new DOMRect,new DOMRect]];function v(t,e,r,f,c){return n(this,arguments,void 0,function*(t,e,n,r,f,c=0,u=0){for(g[f[0]][f[1]]=t.getBoundingClientRect();!(t.offsetTop>window.innerHeight&&(0==c||1==c)||t.offsetTop<-t.height&&(0==c||2==c)||t.offsetLeft>window.innerWidth&&(0==u||1==u)||t.offsetLeft<-t.width&&(0==u||2==u)||s);){if(r==m.value.value[f[0]][f[1]]){if(!a(f))break;g[f[0]][f[1]]=t.getBoundingClientRect(),1==f[0]&&d&&l(t.getBoundingClientRect(),d.getBoundingClientRect())&&(s=!0,window.removeEventListener("keydown",i),document.getElementById("gameOver").style.visibility="visible",d.style.animation="player-dead 100ms infinite",document.querySelector("#gameOver .game-over .button").focus())}t.style.top=`${t.offsetTop+e}px`,t.style.left=`${t.offsetLeft+n}px`,yield o(10)}m.value.setCell(f[0],f[1],m.value.value[f[0]][f[1]]+1)})}function b(t,e,o,i,r,f){return n(this,void 0,void 0,function*(){const n=document.createElement("img");n.style.top=t+"px",n.style.left=e+"px",n.src="https://s21.ax1x.com/2024/12/28/pAxP0P0.png",n.className="mjyy-projectile",document.body.appendChild(n),yield v(n,o,i,r,f),s||n.remove()})}const L=2,A=800;function O(t,e,o,i,r,f,c,l){return n(this,void 0,void 0,function*(){const n=document.createElement("img");n.style.top=t+"px",n.style.left=e+"px",n.src="https://s21.ax1x.com/2025/10/30/pVzCjtH.png",n.className="fire-charge",document.body.appendChild(n),yield v(n,o,i,c,l,r,f),s||n.remove()})}document.addEventListener("DOMContentLoaded",function(){});let R=!1,k="null";function M(t){function e(){if(d){const t=getComputedStyle(d).transform;d.style.transform="none"===t?"unset":t,d.style.setProperty("--player_last-transform",t)}}d&&(R?(d.style.animationPlayState="paused",e()):d.addEventListener("animationend",function(){e(),R=!1},{once:!0}),k==t&&(d.style.animation="unset",d.offsetWidth),R=!0,d.style.animation=t,k=t)}let D=!0,S=0;function T(t,e=!0){S+=t,S<0&&(S=0),e&&x()}function x(){y&&(y.style.opacity=(S/C).toString())}const C=50;const E=1,B=10,P=1e3,W=10;const _=document.getElementById("score");let j=function(t){let e=t;return{get value(){return e},set value(t){e=t,_&&(_.innerHTML=t.toString())}}}(0);function H(){c()}function I(){s||w("ArrowUp")}function U(){s||w("ArrowDown")}function N(){s||w("ArrowLeft")}function q(){s||w("ArrowRight")}document.addEventListener("DOMContentLoaded",function(){document.getElementById("gameStart").focus()}),function(t){const e=window;for(const o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}(e)})();