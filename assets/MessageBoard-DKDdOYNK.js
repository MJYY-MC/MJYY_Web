import{s as F,d as w,f as $,a as l,h as I,j as g,k as a,t as f,u as c,Q as E,P as m,D as T,F as K,n as N}from"./virtual_svg-icons-register-CcMOQztT.js";import"./app-DVUlx0xk.js";const S="https://web.mjyy.top/server",q="5v2co487ycn7t8qorhntov584r7ghcqo45nv7ghqru4io75vyn";async function U(r,s=void 0){if(!F)return{code:3};try{const e=await fetch(`${S}${r}`,{method:"POST",headers:{"X-API-Key":q,"Content-Type":"application/json"},body:JSON.stringify(s||{})});return{code:0,result:{ok:e.ok,json:await e.json(),statusCode:e.status}}}catch{return{code:4}}}const z={class:"card-header d-flex justify-content-center"},D={class:"card-body"},M={class:"input-group"},O={class:"input-group-text"},V=["placeholder"],x=w({__name:"passwordInput",emits:["passwdEnter"],setup(r,{expose:s,emit:e}){const{lt:o}=$(),d=e,n=l(null),t=l(null),v=l(!1),u=l(null),i=l(null),_=l("alert-secondary");function y(p,k){i.value&&(i.value.innerText=o(`feedback.${k}`),_.value=p,v.value=p=="alert-danger",i.value.style.display="")}function b(){t.value&&(t.value.value!=""?d("passwdEnter",t.value.value):y("alert-danger",0))}function P(){return t.value&&u.value?(t.value.disabled=!0,u.value.disabled=!0,!0):!1}function C(){return t.value&&u.value?(t.value.disabled=!1,u.value.disabled=!1,!0):!1}function B(){return n.value?(n.value.style.display="none",!0):!1}function j(){return n.value?(n.value.style.display="",!0):!1}return s({showFeedback:y,lockInput:P,unlockInput:C,hidePanel:B,unhidePanel:j}),(p,k)=>(g(),I("div",{ref_key:"pswIptPanel",ref:n,class:"card"},[a("div",z,[a("strong",null,f(c(o)("title")),1)]),a("div",D,[a("div",M,[a("span",O,f(c(o)("label")),1),a("input",{ref_key:"passwordInput",ref:t,type:"password",class:m(["form-control",{"is-invalid":v.value}]),placeholder:c(o)("inputText"),onKeyup:E(b,["enter"])},null,42,V),a("button",{class:"btn btn-outline-secondary",type:"button",ref_key:"enterButton",ref:u,onClick:b},f(c(o)("enterBtn")),513)]),a("div",{ref_key:"feedback",ref:i,class:m(["alert mt-3 mb-0",[_.value]]),role:"alert",style:{display:"none"}},null,2)])],512))}});function h(r){const s=r;s.__i18n=s.__i18n||[],s.__i18n.push({locale:"",resource:{"zh-CN":{label:{t:0,b:{t:2,i:[{t:3}],s:"访问密码"}},enterBtn:{t:0,b:{t:2,i:[{t:3}],s:"进入"}},inputText:{t:0,b:{t:2,i:[{t:3}],s:"密码"}},feedback:{0:{t:0,b:{t:2,i:[{t:3}],s:"密码不可为空"}},1:{t:0,b:{t:2,i:[{t:3}],s:"密码错误"}},2:{t:0,b:{t:2,i:[{t:3}],s:"无法连接至服务"}},3:{t:0,b:{t:2,i:[{t:3}],s:"验证成功，等待加载"}},4:{t:0,b:{t:2,i:[{t:3}],s:"正在验证"}}},title:{t:0,b:{t:2,i:[{t:3}],s:"访问限制内容"}}},"en-US":{}}})}typeof h=="function"&&h(x);const A={id:"fullContainer"},J=w({__name:"MessageBoard",setup(r){const s=l(null),e=l(null);async function o(n){if(e.value){e.value.showFeedback("alert-secondary",4),e.value.lockInput();const t=await U("/gateway/minecraft_messagepage",{Password:n});t.result!=null?t.result.ok?(e.value.showFeedback("alert-success",3),s.value.src=`${t.result.json.url}?passkey=${t.result.json.paras.passkey}`):t.result.statusCode==401?(e.value.showFeedback("alert-danger",1),e.value.unlockInput()):(e.value.showFeedback("alert-warning",2),e.value.unlockInput()):(e.value.showFeedback("alert-warning",2),e.value.unlockInput())}}function d(){s.value&&s.value.src!=""&&(s.value.style.display="",e.value?.hidePanel())}return(n,t)=>(g(),I(K,null,[a("iframe",{ref_key:"mainIframe",ref:s,id:"mainIframe",src:"",onload:d,style:{display:"none"},sandbox:"allow-scripts allow-same-origin allow-forms"},null,512),a("div",A,[T(x,{ref_key:"passwordInput",ref:e,onPasswdEnter:o},null,512)])],64))}}),X=N(J,[["__scopeId","data-v-b923826d"]]);export{X as default};
