import{d as h,f as E,a as n,h as I,j as g,k as s,t as p,u as c,Q as $,P as m,D as j,F as N,n as T}from"./virtual_svg-icons-register-CCZJW-VO.js";import"./app-CJuk62oA.js";async function z(u,a=void 0){return{code:2}}const D={class:"card-header d-flex justify-content-center"},K={class:"card-body"},M={class:"input-group"},S={class:"input-group-text"},U=["placeholder"],x=h({__name:"passwordInput",emits:["passwdEnter"],setup(u,{expose:a,emit:t}){const{lt:l}=E(),d=t,r=n(null),e=n(null),v=n(!1),o=n(null),i=n(null),_=n("alert-secondary");function b(f,k){i.value&&(i.value.innerText=l(`feedback.${k}`),_.value=f,v.value=f=="alert-danger",i.value.style.display="")}function y(){e.value&&(e.value.value!=""?d("passwdEnter",e.value.value):b("alert-danger",0))}function B(){return e.value&&o.value?(e.value.disabled=!0,o.value.disabled=!0,!0):!1}function F(){return e.value&&o.value?(e.value.disabled=!1,o.value.disabled=!1,!0):!1}function P(){return r.value?(r.value.style.display="none",!0):!1}function C(){return r.value?(r.value.style.display="",!0):!1}return a({showFeedback:b,lockInput:B,unlockInput:F,hidePanel:P,unhidePanel:C}),(f,k)=>(g(),I("div",{ref_key:"pswIptPanel",ref:r,class:"card"},[s("div",D,[s("strong",null,p(c(l)("title")),1)]),s("div",K,[s("div",M,[s("span",S,p(c(l)("label")),1),s("input",{ref_key:"passwordInput",ref:e,type:"password",class:m(["form-control",{"is-invalid":v.value}]),placeholder:c(l)("inputText"),onKeyup:$(y,["enter"])},null,42,U),s("button",{class:"btn btn-outline-secondary",type:"button",ref_key:"enterButton",ref:o,onClick:y},p(c(l)("enterBtn")),513)]),s("div",{ref_key:"feedback",ref:i,class:m(["alert mt-3 mb-0",[_.value]]),role:"alert",style:{display:"none"}},null,2)])],512))}});function w(u){const a=u;a.__i18n=a.__i18n||[],a.__i18n.push({locale:"",resource:{"zh-CN":{label:{t:0,b:{t:2,i:[{t:3}],s:"访问密码"}},enterBtn:{t:0,b:{t:2,i:[{t:3}],s:"进入"}},inputText:{t:0,b:{t:2,i:[{t:3}],s:"密码"}},feedback:{0:{t:0,b:{t:2,i:[{t:3}],s:"密码不可为空"}},1:{t:0,b:{t:2,i:[{t:3}],s:"密码错误"}},2:{t:0,b:{t:2,i:[{t:3}],s:"无法连接至服务"}},3:{t:0,b:{t:2,i:[{t:3}],s:"验证成功，等待加载"}},4:{t:0,b:{t:2,i:[{t:3}],s:"正在验证"}}},title:{t:0,b:{t:2,i:[{t:3}],s:"访问限制内容"}}},"en-US":{}}})}typeof w=="function"&&w(x);const V={id:"fullContainer"},L=h({__name:"MessageBoard",setup(u){const a=n(null),t=n(null);async function l(r){if(t.value){t.value.showFeedback("alert-secondary",4),t.value.lockInput();const e=await z("/gateway/minecraft_messagepage",{});e.result!=null?e.result.ok?(t.value.showFeedback("alert-success",3),a.value.src=`${e.result.json.url}?passkey=${e.result.json.paras.passkey}`):e.result.statusCode==401?(t.value.showFeedback("alert-danger",1),t.value.unlockInput()):(t.value.showFeedback("alert-warning",2),t.value.unlockInput()):(t.value.showFeedback("alert-warning",2),t.value.unlockInput())}}function d(){a.value&&a.value.src!=""&&(a.value.style.display="",t.value?.hidePanel())}return(r,e)=>(g(),I(N,null,[s("iframe",{ref_key:"mainIframe",ref:a,id:"mainIframe",src:"",onload:d,style:{display:"none"},sandbox:"allow-scripts allow-same-origin allow-forms"},null,512),s("div",V,[j(x,{ref_key:"passwordInput",ref:t,onPasswdEnter:l},null,512)])],64))}}),A=T(L,[["__scopeId","data-v-b923826d"]]);export{A as default};
